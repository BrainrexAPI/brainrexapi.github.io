(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{175:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return m})),a.d(t,"metadata",(function(){return d})),a.d(t,"rightToc",(function(){return p})),a.d(t,"default",(function(){return h}));var n=a(1),l=a(6),r=(a(0),a(261)),c=a(259),i=a(260),s=a(255),o=a(262),u=a(263),m={delivery_guarantee:"best_effort",description:"The Vector `file` sink streams `log` events to a file.",event_types:["log"],issues_url:"https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22sink%3A+file%22",operating_systems:["linux","macos","windows"],sidebar_label:'file|["log"]',source_url:"https://github.com/timberio/vector/blob/master/src/sinks/file/mod.rs",status:"prod-ready",title:"File Sink",unsupported_operating_systems:[]},d={id:"reference/sinks/file",title:"File Sink",description:"The Vector `file` sink streams `log` events to a file.",source:"@site/docs/reference/sinks/file.md",permalink:"/docs/reference/sinks/file",editUrl:"https://github.com/timberio/vector/edit/master/website/docs/reference/sinks/file.md",sidebar_label:'file|["log"]',sidebar:"docs",previous:{title:"Elasticsearch Sink",permalink:"/docs/reference/sinks/elasticsearch"},next:{title:"GCP PubSub Sink",permalink:"/docs/reference/sinks/gcp_pubsub"}},p=[{value:"Configuration",id:"configuration",children:[]},{value:"Options",id:"options",children:[{value:"encoding",id:"encoding",children:[]},{value:"healthcheck",id:"healthcheck",children:[]},{value:"idle_timeout_secs",id:"idle_timeout_secs",children:[]},{value:"path",id:"path",children:[]}]},{value:"How It Works",id:"how-it-works",children:[{value:"Dynamic file and directory creation",id:"dynamic-file-and-directory-creation",children:[]},{value:"Environment Variables",id:"environment-variables",children:[]},{value:"Streaming",id:"streaming",children:[]},{value:"Template Syntax",id:"template-syntax",children:[]}]}],b={rightToc:p},f="wrapper";function h(e){var t=e.components,a=Object(l.a)(e,["components"]);return Object(r.b)(f,Object(n.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"The Vector ",Object(r.b)("inlineCode",{parentName:"p"},"file")," sink ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#streaming"}),"streams")," ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/about/data-model/log/"}),Object(r.b)("inlineCode",{parentName:"a"},"log"))," events to a file."),Object(r.b)("h2",{id:"configuration"},"Configuration"),Object(r.b)(c.a,{block:!0,defaultValue:"common",values:[{label:"Common",value:"common"},{label:"Advanced",value:"advanced"}],mdxType:"Tabs"},Object(r.b)(i.a,{value:"common",mdxType:"TabItem"},Object(r.b)(s.a,{fileName:"vector.toml",learnMoreUrl:"/docs/setup/configuration/",mdxType:"CodeHeader"}),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-toml"}),'[sinks.my_sink_id]\n  # REQUIRED - General\n  type = "file" # must be: "file"\n  inputs = ["my-source-id"] # example\n  path = "vector-%Y-%m-%d.log" # example\n\n  # REQUIRED - requests\n  encoding = "ndjson" # example, enum\n'))),Object(r.b)(i.a,{value:"advanced",mdxType:"TabItem"},Object(r.b)(s.a,{fileName:"vector.toml",learnMoreUrl:"/docs/setup/configuration/",mdxType:"CodeHeader"}),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-toml"}),'[sinks.my_sink_id]\n  # REQUIRED - General\n  type = "file" # must be: "file"\n  inputs = ["my-source-id"] # example\n  path = "vector-%Y-%m-%d.log" # example\n\n  # REQUIRED - requests\n  encoding = "ndjson" # example, enum\n\n  # OPTIONAL - General\n  healthcheck = true # default\n  idle_timeout_secs = "30" # default\n')))),Object(r.b)("h2",{id:"options"},"Options"),Object(r.b)(o.a,{filters:!0,mdxType:"Fields"},Object(r.b)(u.a,{common:!0,defaultValue:null,enumValues:{ndjson:"Each event is encoded into JSON and the payload is new line delimited.",text:"Each event is encoded into text via the `message` key and the payload is new line delimited."},examples:["ndjson","text"],name:"encoding",nullable:!1,path:null,relevantWhen:null,required:!0,templateable:!1,type:"string",unit:null,mdxType:"Field"},Object(r.b)("h3",{id:"encoding"},"encoding"),Object(r.b)("p",null,"The encoding format used to serialize the events before outputting.")),Object(r.b)(u.a,{common:!1,defaultValue:!0,enumValues:null,examples:[!0,!1],name:"healthcheck",nullable:!1,path:null,relevantWhen:null,required:!1,templateable:!1,type:"bool",unit:null,mdxType:"Field"},Object(r.b)("h3",{id:"healthcheck"},"healthcheck"),Object(r.b)("p",null,"Enables/disables the sink healthcheck upon start.")),Object(r.b)(u.a,{common:!1,defaultValue:"30",enumValues:null,examples:["30"],name:"idle_timeout_secs",nullable:!0,path:null,relevantWhen:null,required:!1,templateable:!1,type:"int",unit:null,mdxType:"Field"},Object(r.b)("h3",{id:"idle_timeout_secs"},"idle_timeout_secs"),Object(r.b)("p",null,"The amount of time a file can be idle  and stay open. After not receiving any events for this timeout, the file will be flushed and closed.")),Object(r.b)(u.a,{common:!0,defaultValue:null,enumValues:null,examples:["vector-%Y-%m-%d.log","application-{{ application_id }}-%Y-%m-%d.log"],name:"path",nullable:!1,path:null,relevantWhen:null,required:!0,templateable:!0,type:"string",unit:null,mdxType:"Field"},Object(r.b)("h3",{id:"path"},"path"),Object(r.b)("p",null,"File name to write events to. See ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#template-syntax"}),"Template Syntax")," for more info."))),Object(r.b)("h2",{id:"how-it-works"},"How It Works"),Object(r.b)("h3",{id:"dynamic-file-and-directory-creation"},"Dynamic file and directory creation"),Object(r.b)("p",null,"Vector will attempt to create the entire directory structure and the file when\nemitting events to the file sink. This requires that the Vector agent have\nthe correct permissions to create and write to files in the specified directories."),Object(r.b)("h3",{id:"environment-variables"},"Environment Variables"),Object(r.b)("p",null,"Environment variables are supported through all of Vector's configuration.\nSimply add ",Object(r.b)("inlineCode",{parentName:"p"},"${MY_ENV_VAR}")," in your Vector configuration file and the variable\nwill be replaced before being evaluated."),Object(r.b)("p",null,"You can learn more in the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/setup/configuration/#environment-variables"}),"Environment Variables"),"\nsection."),Object(r.b)("h3",{id:"streaming"},"Streaming"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"file")," sink streams data on a real-time\nevent-by-event basis. It does not batch data."),Object(r.b)("h3",{id:"template-syntax"},"Template Syntax"),Object(r.b)("p",null,"The ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#path"}),Object(r.b)("inlineCode",{parentName:"a"},"path"))," options\nsupport ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/setup/configuration/#template-syntax"}),"Vector's template syntax"),",\nenabling dynamic values derived from the event's data. This syntax accepts\n",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.rs/chrono/0.3.1/chrono/format/strftime/index.html"}),"strptime specifiers")," as well as the\n",Object(r.b)("inlineCode",{parentName:"p"},"{{ field_name }}")," syntax for accessing event fields. For example:"),Object(r.b)(s.a,{fileName:"vector.toml",mdxType:"CodeHeader"}),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-toml"}),'[sinks.my_file_sink_id]\n  # ...\n  path = "vector-%Y-%m-%d.log"\n  path = "application-{{ application_id }}-%Y-%m-%d.log"\n  # ...\n')),Object(r.b)("p",null,"You can read more about the complete syntax in the\n",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/setup/configuration/#template-syntax"}),"template syntax section"),"."))}h.isMDXComponent=!0},255:function(e,t,a){"use strict";var n=a(0),l=a.n(n);a(85);t.a=function({fileName:e,links:t}){let a=[];for(var n in t)a.push(l.a.createElement("a",{href:n.href},n.text||"Learn more&hellip;"));return l.a.createElement("div",{className:"code-header"},a.length>0&&l.a.createElement("span",{className:"code-header--links"},a),e)}},257:function(e,t,a){"use strict";(function(e){var n=a(1),l=a(0),r=a.n(l),c=a(277),i=a(268),s=a.n(i),o=a(267),u=a(253),m=a.n(u),d=a(275),p=a.n(d),b=a(269),f=a.n(b),h=a(254),v=a(86),y=a.n(v),g=a(265);(void 0!==e?e:window).Prism=o.a,a(270),a(271),a(272),a(273),a(274);const O=/{([\d,-]+)}/;t.a=({children:e,className:t,metastring:a})=>{const{siteConfig:{themeConfig:{prism:i={}}}}=Object(h.a)(),[o,u]=Object(l.useState)(!1),d=Object(l.useRef)(null),b=Object(l.useRef)(null),[v]=Object(g.a)();let j=[];if(a&&O.test(a)){const e=a.match(O)[1];j=f.a.parse(e).filter(e=>e>0)}Object(l.useEffect)(()=>{let e;return b.current&&(e=new s.a(b.current,{target:()=>d.current})),()=>{e&&e.destroy()}},[b.current,d.current]);let E=t&&t.replace(/language-/,"");!E&&i.defaultLanguage&&(E=i.defaultLanguage);const k=()=>{window.getSelection().empty(),u(!0),setTimeout(()=>u(!1),2e3)};let N="dark"==v?i.darkTheme:i.theme;return r.a.createElement(c.a,Object(n.a)({},c.b,{theme:N||p.a,code:e.trim(),language:E}),({className:e,style:t,tokens:a,getLineProps:l,getTokenProps:c})=>r.a.createElement("div",{className:y.a.codeBlockWrapper},r.a.createElement("pre",{ref:d,className:m()(e,y.a.codeBlock),style:t},a.map((e,t)=>{const a=l({line:e,key:t});return j.includes(t+1)&&(a.className=`${a.className} docusaurus-highlight-code-line`),r.a.createElement("div",Object(n.a)({key:t},a),e.map((e,t)=>r.a.createElement("span",Object(n.a)({key:t},c({token:e,key:t})))))})),r.a.createElement("button",{ref:b,type:"button","aria-label":"Copy code to clipboard",className:y.a.copyButton,onClick:k},o?"Copied":"Copy")))}}).call(this,a(48))},258:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(0),l=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var o=l.a.createContext({}),u=function(e){var t=l.a.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i({},t,{},e)),a},m=function(e){var t=u(e.components);return l.a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},p=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,c=e.parentName,o=s(e,["components","mdxType","originalType","parentName"]),m=u(a),p=n,b=m["".concat(c,".").concat(p)]||m[p]||d[p]||r;return a?l.a.createElement(b,i({ref:t},o,{components:a})):l.a.createElement(b,i({ref:t},o))}));p.displayName="MDXCreateElement"},259:function(e,t,a){"use strict";var n=a(1),l=a(0),r=a.n(l),c=a(276),i=a(253),s=a.n(i),o=a(279),u=a.n(o);function m({block:e,centered:t,className:a,style:n,values:l,selectedValue:c,setSelectedValue:i}){return r.a.createElement("div",{className:t?"tabs--centered":""},r.a.createElement("ul",{className:s()("tabs",a,{"tabs--block":e}),style:n},l.map(({value:e,label:t})=>r.a.createElement("li",{className:s()("tab-item",{"tab-item--active":c===e}),key:e,onClick:()=>i(e)},t))))}function d({selectedValue:e,setSelectedValue:t,values:a}){return r.a.createElement(c.a,{className:"react-select-container",classNamePrefix:"react-select",options:a,isClearable:!1,placeholder:"Select a version...",value:a.find(t=>t.value==e),onChange:e=>t(e?e.value:null)})}t.a=function(e){const{block:t,centered:a,children:c,defaultValue:i,select:s,style:o,values:p,urlKey:b}=e,[f,h]=Object(l.useState)(i);return Object(l.useEffect)(()=>{if("undefined"!=typeof window&&window.location&&b){let e=u.a.parse(window.location.search);e[b]&&h(e[b])}},[]),r.a.createElement("div",null,p.length>1&&(s?r.a.createElement(d,Object(n.a)({selectedValue:f,setSelectedValue:h},e)):r.a.createElement(m,Object(n.a)({selectedValue:f,setSelectedValue:h},e))),r.a.createElement("div",{className:"margin-vert--md"},l.Children.toArray(c).filter(e=>e.props.value===f)[0]))}},260:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(e){return l.a.createElement("div",null,e.children)}},262:function(e,t,a){"use strict";var n=a(0),l=a.n(n);a(87);t.a=function({children:e,filters:t}){const[a,r]=Object(n.useState)(!1),[c,i]=Object(n.useState)(!1),[s,o]=Object(n.useState)(null);let u=Array.isArray(e)?e:[e],m=u.some(e=>e.props.common),d=u.some(e=>e.props.required),p=u;return a&&(p=p.filter(e=>e.props.common)),c&&(p=p.filter(e=>e.props.required)),s&&(p=p.filter(e=>e.props.name.toLowerCase().includes(s.toLowerCase()))),l.a.createElement("div",{className:"fields"},u.length>1&&!1!==t?l.a.createElement("div",{className:"filters"},l.a.createElement("span",{className:"result-count"},p.length," items"),l.a.createElement("div",{className:" search"},l.a.createElement("input",{type:"text",onChange:e=>o(e.currentTarget.value),placeholder:"\ud83d\udd0d Search..."})),l.a.createElement("div",{className:"checkboxes"},m&&l.a.createElement("label",{title:"Only show popular/common results"},l.a.createElement("input",{type:"checkbox",onChange:e=>r(e.currentTarget.checked),checked:a}),"common only"),d&&l.a.createElement("label",{title:"Only show required results"},l.a.createElement("input",{type:"checkbox",onChange:e=>i(e.currentTarget.checked),checked:c}),"required only"))):null,l.a.createElement("div",{className:"section-list"},!Array.isArray(p)||p.length>0?p:l.a.createElement("div",{className:"empty"},l.a.createElement("div",{className:"icon"},"\u2639"),l.a.createElement("div",null,"No fields found"))))}},263:function(e,t,a){"use strict";a(266);var n=a(0),l=a.n(n),r=a(253),c=a.n(r),i=(a(258),a(255)),s=a(257);function o(e){return JSON.stringify(e)}function u(e){return e.includes(".")?'"'+e+'"':e}function m(e,t){return(a=t)&&a.constructor===Object?"name"in t&&"value"in t?`${u(t.name)} = ${o(t.value)}`:`${u(Object.keys(t)[0])} = ${o(Object.values(t)[0])}`:e?`${e} = ${o(t)}`:`${o(t)}`;var a}function d({values:e}){let t=[];if(Array.isArray(e))for(var a in e){let n=e[a];t.push(l.a.createElement("code",{key:n},o(n))),t.push(" ")}else for(var n in e)t.push(l.a.createElement("code",{key:n,title:e[n]},o(n))),t.push(" ");return t}function p({name:e,path:t,value:a}){return l.a.createElement("code",null,m(null,a))}function b({name:e,path:t,values:a}){let n="";return a.forEach((function(t){n+=m(e,t)+"\n"})),t&&(n=`[${t}]\n${n}`),l.a.createElement("div",null,l.a.createElement(i.a,{fileName:"vector.toml"}),l.a.createElement(s.a,{className:"language-toml"},n))}function f({value:e}){let t=Object.keys(e)[0],a=Object.values(e)[0];return l.a.createElement("span",null,l.a.createElement("code",null,l.a.createElement("a",{href:`#${t}`},t))," = ",l.a.createElement("code",null,o(a)))}function h({defaultValue:e,enumValues:t,examples:a,name:r,path:c,relevantWhen:i}){const[s,o]=Object(n.useState)(!1);return e||t||a&&a.length>0?l.a.createElement("div",{className:"info"},void 0!==e?e?l.a.createElement("div",null,"Default: ",l.a.createElement(p,{name:r,path:c,value:e})):l.a.createElement("div",null,"No default"):null,t?l.a.createElement("div",null,"Enum, must be one of: ",l.a.createElement(d,{values:t})):null,i?l.a.createElement("div",null,"Only relevant when: ",l.a.createElement(f,{value:i})):null,l.a.createElement("div",null,l.a.createElement("div",{className:"show-more",onClick:()=>o(!s)},s?"Hide examples":"View examples"),s&&l.a.createElement("div",{className:"examples"},l.a.createElement(b,{name:r,path:c,values:a})))):null}t.a=function({children:e,common:t,defaultValue:a,enumValues:r,examples:i,name:s,path:o,relevantWhen:u,templateable:m,type:d,unit:p,required:b}){const[f,v]=Object(n.useState)(!1);let y=e;return f&&(y=y.filter(e=>"p"!=e.props.originalType)),l.a.createElement("div",{className:c()("field","section",b?"field-required":"",f?"field-collapsed":""),required:b},l.a.createElement("div",{className:"badges"},t&&l.a.createElement("span",{className:"badge badge--primary",title:"This is a popular that we recommend for getting started"},"common"),m&&l.a.createElement("span",{className:"badge badge--primary",title:"This option is dynamic and accepts the Vector template syntax"},"templateable"),l.a.createElement("span",{className:"badge badge--secondary"},d),r&&Object.keys(r).length>0&&l.a.createElement("span",{className:"badge badge--secondary",title:"This option is an enumation and only allows specific values"},"enum"),p&&l.a.createElement("span",{className:"badge badge--secondary"},p),b?l.a.createElement("span",{className:"badge badge--danger"},"required"):l.a.createElement("span",{className:"badge badge--secondary"},"optional")),y,!f&&l.a.createElement(h,{defaultValue:a,enumValues:r,examples:i,name:s,path:o,relevantWhen:u}))}}}]);